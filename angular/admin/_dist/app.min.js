!function(){"use strict";function t(t,e,o){o.otherwise("/posts"),e.state("posts",{url:"/posts",templateUrl:"posts/index.view.html",controller:"Posts.IndexController",controllerAs:"vm",data:{activeTab:"posts"}}).state("posts/add",{url:"/posts/add",templateUrl:"posts/add-edit.view.html",controller:"Posts.AddEditController",controllerAs:"vm",data:{activeTab:"posts"}}).state("posts/edit",{url:"/posts/edit/:_id",templateUrl:"posts/add-edit.view.html",controller:"Posts.AddEditController",controllerAs:"vm",data:{activeTab:"posts"}}).state("pages",{url:"/pages",templateUrl:"pages/index.view.html",controller:"Pages.IndexController",controllerAs:"vm",data:{activeTab:"pages"}}).state("pages/add",{url:"/pages/add",templateUrl:"pages/add-edit.view.html",controller:"Pages.AddEditController",controllerAs:"vm",data:{activeTab:"pages"}}).state("pages/edit",{url:"/pages/edit/:_id",templateUrl:"pages/add-edit.view.html",controller:"Pages.AddEditController",controllerAs:"vm",data:{activeTab:"pages"}}).state("account",{url:"/account",templateUrl:"account/index.view.html",controller:"Account.IndexController",controllerAs:"vm",data:{activeTab:"account"}})}function e(t,e,o){t.defaults.headers.common.Authorization="Bearer "+o.jwtToken,e.$on("$stateChangeSuccess",function(t,o,a,r,l){e.activeTab=o.data.activeTab})}t.$inject=["$locationProvider","$stateProvider","$urlRouterProvider"],e.$inject=["$http","$rootScope","$window"],angular.module("app",["ui.router"]).config(t).run(e),$(function(){$.get("/token",function(t){window.jwtToken=t,angular.bootstrap(document,["app"])})})}();
!function(){"use strict";function e(e,n,t){function r(){n.GetCurrent().then(function(e){u.user=e})}function c(){n.Update(u.user).then(function(){t.Success("User updated")})["catch"](function(e){t.Error(e)})}function o(){n.Delete(u.user._id).then(function(){e.location="/login"})["catch"](function(e){t.Error(e)})}var u=this;u.user=null,u.saveUser=c,u.deleteUser=o,r()}e.$inject=["$window","UserService","AlertService"],angular.module("app").controller("Account.IndexController",e)}();
!function(){"use strict";function e(e,t,a,n,i){function c(){l.loading=0,e._id?(l.loading+=1,n.GetById(e._id).then(function(e){l.loading-=1,l.page=e})):l.page={publish:!0}}function o(){l.page.slug=a("slugify")(l.page.title),n.Save(l.page).then(function(){i.Success("Page saved",!0),t.path("/pages")})["catch"](function(e){i.Error(e)})}function g(){n.Delete(l.page._id).then(function(){i.Success("Page deleted",!0),t.path("/pages")})["catch"](function(e){i.Error(e)})}var l=this;l.page={},l.savePage=o,l.deletePage=g,c()}e.$inject=["$stateParams","$location","$filter","PageService","AlertService"],angular.module("app").controller("Pages.AddEditController",e)}();
!function(){"use strict";function n(n){function e(){t.loading=!0,n.GetAll().then(function(n){t.loading=!1,t.pages=n})}var t=this;t.pages=[],e()}n.$inject=["PageService"],angular.module("app").controller("Pages.IndexController",n)}();
!function(){"use strict";function t(t,o,s,e,n){function i(){l.loading=0,t._id?(l.loading+=1,e.GetById(t._id).then(function(t){l.loading-=1,l.post=t})):l.post={publishDate:moment().startOf("day").utc().toISOString(),publish:!0}}function c(){l.post.slug=s("slugify")(l.post.title),e.Save(l.post).then(function(){n.Success("Post saved",!0),o.path("/posts")})["catch"](function(t){n.Error(t)})}function a(){e.Delete(l.post._id).then(function(){n.Success("Post deleted",!0),o.path("/posts")})["catch"](function(t){n.Error(t)})}var l=this;l.post={},l.savePost=c,l.deletePost=a,i()}t.$inject=["$stateParams","$location","$filter","PostService","AlertService"],angular.module("app").controller("Posts.AddEditController",t)}();
!function(){"use strict";function n(n){function t(){o.loading=!0,n.GetAll().then(function(n){o.loading=!1,o.posts=n})}var o=this;o.posts=[],t()}n.$inject=["PostService"],angular.module("app").controller("Posts.IndexController",n)}();
!function(){"use strict";function t(t){return{require:"ngModel",link:function(e,r,n,i){r.addClass("datepicker"),r.datepicker({dateFormat:"dd/mm/yy"}),i.$formatters.push(function(e){return e?t("date")(e,"dd/MM/yyyy"):void 0}),i.$parsers.push(function(t){return t?moment(t,"DD/MM/YYYY").utc().toISOString():void 0})}}}t.$inject=["$filter"],angular.module("app").directive("datepicker",t)}();
!function(){"use strict";function e(e){return{require:"ngModel",link:function(e,i,t,n){var a;a="minimal"===t.wysiwyg?{height:100,toolbar:[{name:"basic",items:["Bold","Italic","Underline"]},{name:"links",items:["Link","Unlink"]},{name:"tools",items:["Maximize"]},{name:"document",items:["Source"]}],removePlugins:"elementspath",resize_enabled:!1,allowedContent:!0}:{filebrowserImageUploadUrl:"/api/files/upload",removeButtons:"About,Form,Checkbox,Radio,TextField,Textarea,Select,Button,ImageButton,HiddenField,Save,CreateDiv,Language,BidiLtr,BidiRtl,Flash,Iframe,addFile,Styles",allowedContent:!0};var o=i.ckeditor(a);o.editor.on("change",function(){n.$setViewValue(this.getData())})}}}e.$inject=["$rootScope"],angular.module("app").directive("wysiwyg",e)}();
!function(){"use strict";function r(){return function(r){if(r){var e=r.toLowerCase().trim();return e=e.replace(/[^a-z0-9\s-]/g," "),e=e.replace(/[\s-]+/g,"-")}}}angular.module("app").filter("slugify",r)}();
!function(){"use strict";function e(e){function n(){function n(){var n=e.flash;n&&(n.keepAfterLocationChange?n.keepAfterLocationChange=!1:delete e.flash)}e.$on("$locationChangeStart",function(){n()})}function t(n,t){e.flash={message:n,type:"success",keepAfterLocationChange:t}}function a(n,t){e.flash={message:n,type:"danger",keepAfterLocationChange:t}}var o={};return o.Success=t,o.Error=a,n(),o}e.$inject=["$rootScope"],angular.module("app").factory("AlertService",e)}();
!function(){"use strict";function t(t,e){function n(){return t.get(o).then(a,c)}function r(e){return t.get(o+"/"+e).then(a,c)}function u(e){return e._id?t.put(o+"/"+e._id,e).then(a,c):t.post(o,e).then(a,c)}function i(e){return t["delete"](o+"/"+e).then(a,c)}function a(t){return t.data}function c(t){return e.reject(t.data)}var o="/api/pages",f={};return f.GetAll=n,f.GetById=r,f.Save=u,f.Delete=i,f}t.$inject=["$http","$q"],angular.module("app").factory("PageService",t)}();
!function(){"use strict";function t(t,e){function n(){return t.get(a).then(c,o)}function r(e){return t.get(a+"/"+e).then(c,o)}function u(e){return e._id?t.put(a+"/"+e._id,e).then(c,o):t.post(a,e).then(c,o)}function i(e){return t["delete"](a+"/"+e).then(c,o)}function c(t){return t.data}function o(t){return e.reject(t.data)}var a="/api/posts",f={};return f.GetAll=n,f.GetById=r,f.Save=u,f.Delete=i,f}t.$inject=["$http","$q"],angular.module("app").factory("PostService",t)}();
!function(){"use strict";function e(e,t){function n(){return e.get("/api/users/current").then(o,p)}function r(){return e.get("/api/users").then(o,p)}function u(t){return e.get("/api/users/"+t).then(o,p)}function i(t){return e.get("/api/users/"+t).then(o,p)}function a(t){return e.post("/api/users",t).then(o,p)}function s(t){return e.put("/api/users/"+t._id,t).then(o,p)}function c(t){return e["delete"]("/api/users/"+t).then(o,p)}function o(e){return e.data}function p(e){return t.reject(e.data)}var f={};return f.GetCurrent=n,f.GetAll=r,f.GetById=u,f.GetByUsername=i,f.Create=a,f.Update=s,f.Delete=c,f}e.$inject=["$http","$q"],angular.module("app").factory("UserService",e)}();